# Google TODO連携Webアプリケーション 画面仕様書

## 1. 画面一覧

### 1.1 認証関連画面
- ログイン画面
- 利用規約・プライバシーポリシー同意画面

### 1.2 メイン機能画面
- ダッシュボード画面
- タスクリスト一覧画面
- タスク一覧画面
- タスク詳細画面
- タスク作成・編集画面
- タグ管理画面

### 1.3 設定・プロフィール関連画面
- ユーザープロフィール画面
- 設定画面

## 2. 画面詳細仕様

### 2.1 認証関連画面

#### 2.1.1 ログイン画面
- **目的**: ユーザーのGoogle認証を行う
- **表示要素**:
  - アプリケーションロゴ
  - アプリケーション名
  - 「Googleでログイン」ボタン
  - アプリケーション概要説明テキスト
- **アクション**:
  - Googleでログインボタンクリック: Google認証フローを開始
- **レスポンシブ対応**:
  - モバイル: 縦長表示、ボタンを大きく
  - デスクトップ: 中央寄せのカード形式

#### 2.1.2 利用規約・プライバシーポリシー同意画面
- **目的**: 初回ログイン時に利用規約とプライバシーポリシーへの同意を得る
- **表示要素**:
  - 利用規約テキスト（スクロール可能）
  - プライバシーポリシーテキスト（スクロール可能）
  - Google Tasks APIのスコープ利用説明
  - 「同意する」ボタン
  - 「同意しない」ボタン
- **アクション**:
  - 同意するボタンクリック: 同意情報を保存し、ダッシュボード画面へ遷移
  - 同意しないボタンクリック: ログアウト処理を実行
- **レスポンシブ対応**:
  - モバイル: 縦長スクロール表示
  - デスクトップ: 横幅制限付きの中央配置

### 2.2 メイン機能画面

#### 2.2.1 ダッシュボード画面
- **目的**: タスク達成状況の統計情報を可視化する
- **表示要素**:
  - ヘッダー（アプリ名、ユーザーアイコン、通知アイコン）
  - サイドナビゲーション（タスクリスト一覧へのリンク）
  - 期間選択タブ（デイリー/ウィークリー/マンスリー/年次）
  - 主要統計値カード（完了タスク数、未完了タスク数、完了率）
  - グラフコンテナ:
    - 完了数推移グラフ
    - 完了率推移グラフ
    - 作成vs完了比較グラフ
    - アクティビティヒートマップ
    - 優先度別/タグ別タスク分布円グラフ
- **アクション**:
  - 期間タブ切り替え: 表示データを期間に応じて更新
  - 日付範囲選択: カスタム期間でデータを更新
  - グラフ上のデータポイントホバー: 詳細ツールチップ表示
- **レスポンシブ対応**:
  - モバイル: 縦長配置、グラフは1列表示
  - タブレット: 2列グリッド
  - デスクトップ: 2〜3列グリッド

#### 2.2.2 タスクリスト一覧画面
- **目的**: ユーザーのGoogle TODOタスクリストを管理する
- **表示要素**:
  - ヘッダー
  - サイドナビゲーション
  - タスクリスト一覧（MUIリスト）
    - リスト名
    - 最終更新日
    - タスク数バッジ
  - 「新規タスクリスト作成」ボタン
- **アクション**:
  - リスト項目クリック: タスク一覧画面へ遷移
  - リスト項目の編集アイコンクリック: リスト名編集モードを表示
  - リスト項目の削除アイコンクリック: 削除確認ダイアログを表示
  - 新規タスクリスト作成ボタンクリック: 新規タスクリスト作成ダイアログを表示
- **レスポンシブ対応**:
  - モバイル: フルスクリーンリスト、ハンバーガーメニューからサイドナビゲーション
  - デスクトップ: 固定サイドバー付きレイアウト

#### 2.2.3 タスク一覧画面
- **目的**: 選択されたタスクリスト内のタスクを表示・管理する
- **表示要素**:
  - ヘッダー（現在のタスクリスト名含む）
  - サイドナビゲーション
  - フィルター/ソートツールバー
    - ステータスフィルター（未完了/完了/全て）
    - 期日フィルター（今日/明日/今週/期限切れ/範囲指定）
    - 優先度フィルター（高/中/低）
    - タグフィルター（複数選択）
    - フリーテキスト検索ボックス
    - ソート選択（タイトル/期日/優先度）
  - DataGridによるタスク一覧表示
    - タスクタイトル
    - 期日
    - 優先度（色付きインジケーター）
    - タグ（チップ表示）
    - 完了状態（チェックボックス）
  - 「新規タスク作成」FABボタン
- **アクション**:
  - フィルター/ソート変更: 表示タスクを更新
  - タスク行クリック: タスク詳細画面をモーダルで表示
  - 完了状態チェックボックスクリック: タスクの完了状態を更新
  - 新規タスク作成ボタンクリック: タスク作成画面を表示
- **レスポンシブ対応**:
  - モバイル: カード形式表示、フィルターはドロワー内に配置
  - タブレット/デスクトップ: DataGrid表示、フィルターはツールバーに展開表示

#### 2.2.4 タスク詳細画面
- **目的**: 選択されたタスクの詳細情報を表示・編集する
- **表示要素**:
  - モーダル/パネルコンテナ
  - タスクタイトル（見出し）
  - 説明テキスト
  - 期日表示（カレンダーアイコン付き）
  - 優先度表示（色付きバッジ）
  - タグ表示（チップリスト）
  - 完了状態（チェックボックス）
  - サブタスクリスト（階層表示、チェックボックス付き）
  - 「編集」ボタン
  - 「削除」ボタン
  - 「閉じる」ボタン
- **アクション**:
  - 編集ボタンクリック: タスク編集画面を表示
  - 削除ボタンクリック: 削除確認ダイアログを表示
  - 完了状態チェックボックスクリック: タスクの完了状態を更新
  - サブタスクチェックボックスクリック: サブタスクの完了状態を更新
  - 閉じるボタンクリック: モーダル/パネルを閉じる
- **レスポンシブ対応**:
  - モバイル: フルスクリーンモーダル
  - デスクトップ: 中央配置モーダル（適切なサイズ）

#### 2.2.5 タスク作成・編集画面
- **目的**: 新規タスクの作成または既存タスクの編集を行う
- **表示要素**:
  - モーダル/パネルコンテナ
  - フォーム
    - タイトル入力フィールド（必須）
    - 説明入力フィールド（複数行、マークダウン対応）
    - 期日選択（日付ピッカー）
    - 所属リスト選択（ドロップダウン）
    - 親タスク選択（ドロップダウン、サブタスク作成時のみ）
    - 優先度選択（ラジオボタン: 高/中/低）
    - タグ選択（マルチセレクト、検索可能、新規作成可能）
  - サブタスク管理セクション
    - 既存サブタスクリスト（ドラッグ可能）
    - 「サブタスク追加」ボタン
  - 「保存」ボタン
  - 「キャンセル」ボタン
- **アクション**:
  - 保存ボタンクリック: フォームデータをAPIに送信し、成功時にタスク一覧画面に戻る
  - キャンセルボタンクリック: 変更を破棄してタスク一覧画面に戻る
  - サブタスク追加ボタンクリック: サブタスク入力フィールドを追加
  - タグ入力: 既存タグの検索/選択または新規タグの作成
- **レスポンシブ対応**:
  - モバイル: フルスクリーンモーダル、1列フォームレイアウト
  - デスクトップ: 中央配置モーダル、2列フォームレイアウト

#### 2.2.6 タグ管理画面
- **目的**: ユーザーが作成したタグの一覧表示と管理を行う
- **表示要素**:
  - ヘッダー
  - サイドナビゲーション
  - タグ一覧（チップ形式またはリスト形式）
    - タグ名
    - 使用中タスク数
    - 編集/削除アイコン
  - 「新規タグ作成」ボタン
- **アクション**:
  - タグクリック: そのタグを持つタスク一覧を表示
  - 編集アイコンクリック: タグ名編集モードを表示
  - 削除アイコンクリック: 削除確認ダイアログを表示
  - 新規タグ作成ボタンクリック: 新規タグ作成ダイアログを表示
- **レスポンシブ対応**:
  - モバイル: リスト形式での表示
  - デスクトップ: グリッド形式のチップ表示

### 2.3 設定・プロフィール関連画面

#### 2.3.1 ユーザープロフィール画面
- **目的**: ユーザー情報の表示と管理
- **表示要素**:
  - ヘッダー
  - サイドナビゲーション
  - ユーザープロファイルカード
    - プロフィール画像（Googleアカウント連携）
    - ユーザー名
    - メールアドレス
    - アカウント作成日
  - 課金プラン情報セクション
    - 現在のプラン（FREE/PREMIUM）
    - プランの詳細
    - プランアップグレードボタン（将来実装）
  - 「ログアウト」ボタン
- **アクション**:
  - ログアウトボタンクリック: セッションを終了し、ログイン画面に戻る
  - プランアップグレードボタンクリック: 将来実装の課金画面に遷移
- **レスポンシブ対応**:
  - モバイル: 縦長配置、セクションごとのカード表示
  - デスクトップ: 2カラムレイアウト

#### 2.3.2 設定画面
- **目的**: アプリケーションの設定管理
- **表示要素**:
  - ヘッダー
  - サイドナビゲーション
  - UI設定セクション
    - テーマ切替（ライト/ダーク/システム）
    - 表示密度設定（標準/コンパクト）
    - デフォルトビュー設定（リスト/カード）
  - 「設定を保存」ボタン
- **アクション**:
  - 設定変更: リアルタイムでプレビュー表示
  - 設定を保存ボタンクリック: 設定をlocalStorageに保存
- **レスポンシブ対応**:
  - モバイル: フルウィドス表示、設定項目は縦長リスト
  - デスクトップ: 中央配置のカード形式

## 3. 共通UI要素

### 3.1 ヘッダー
- アプリケーションロゴ/名称
- 現在の画面タイトル
- ユーザーアイコン（クリックでプロフィールメニュー表示）
- 通知アイコン（将来実装）
- 設定アイコン（設定画面へのリンク）

### 3.2 サイドナビゲーション
- ユーザー情報（簡易表示）
- メインナビゲーションリンク
  - ダッシュボード
  - タスクリスト（展開して個別リスト表示）
  - タグ管理
  - 設定
- モバイル時はハンバーガーメニューから表示

### 3.3 フッター
- アプリケーション著作権表示
- プライバシーポリシーへのリンク
- 利用規約へのリンク

## 4. レスポンシブデザイン対応

### 4.1 ブレイクポイント定義
- モバイル: 0〜599px
- タブレット: 600〜959px
- デスクトップ: 960px以上

### 4.2 基本方針
- モバイルファーストのデザインアプローチ
- 小さな画面ではナビゲーションをハンバーガーメニューに格納
- データグリッドはモバイルではカード形式に切り替え
- フォームは画面サイズに応じて1列/2列レイアウトを切り替え
- タッチ操作に適したUI要素サイズとスペーシング

## 5. テーマ・スタイリング

### 5.1 カラーパレット
- プライマリーカラー: Google Blueベース (#4285F4)
- セカンダリーカラー: 補完色系
- アクセントカラー: 目立つアクションに使用
- 優先度表示色:
  - 高: 赤系 (#E53935)
  - 中: 黄系 (#FFC107) 
  - 低: 緑系 (#43A047)

### 5.2 タイポグラフィ
- Google Fontsの「Roboto」または「Noto Sans」を基本フォントとして使用
- 見出し・本文・ボタンテキストなど用途別にサイズ設定

### 5.3 ダークモード対応
- ライトテーマとダークテーマの両方をサポート
- システム設定連動オプションあり

## 6. アクセシビリティ対応

本システムはWCAG 2.1 AA準拠を目指し、以下のアクセシビリティ対応を実装します：

### 6.1. 基本対応方針

*   **キーボードアクセシビリティ:**
    *   全ての機能がキーボードのみで操作できるようにします。
    *   フォーカス順序を論理的に設定し、視覚的にわかりやすいフォーカスインジケータを表示します。
    *   キーボードトラップ（キーボードフォーカスが要素内に閉じ込められる状態）を防止します。
    *   ショートカットキーを主要機能に割り当てます（例: ESCキーでモーダルを閉じる）。

*   **スクリーンリーダー対応:**
    *   適切なARIA属性と意味のあるHTMLセマンティクスを使用します。
    *   画像に代替テキストを提供します。
    *   フォーム要素にはラベルを関連付けます。
    *   動的に変化するコンテンツには適切な通知を提供します。

*   **色とコントラスト:**
    *   テキストと背景のコントラスト比が4.5:1（小さいテキスト）または3:1（大きいテキスト）以上になるようにします。
    *   色のみに依存せず、アイコンやテキストラベルなど複数の識別手段を提供します。
    *   フォーカス状態を色だけでなく、アウトラインやアンダーラインなど視覚的な変化でも示します。

*   **拡大表示対応:**
    *   ブラウザの拡大機能（最大200%）使用時にも内容やレイアウトが崩れないようにします。
    *   フォントサイズを相対単位（rem/em）で設定し、ユーザーの設定を尊重します。

### 6.2. 実装テクニック

*   **適切なセマンティックHTML:** ヘッダー、ナビゲーション、メインコンテンツ、フッターに適切なHTML5要素を使用します。
    ```jsx
    <header>...</header>
    <nav>...</nav>
    <main>...</main>
    <footer>...</footer>
    ```

*   **ARIA属性の活用:** 必要に応じてARIA属性を追加して、スクリーンリーダーに適切な情報を提供します。
    ```jsx
    <Button
      aria-label="通知一覧を開く"
      aria-expanded={isOpen}
      aria-haspopup="true"
      onClick={handleClick}
    >
      <NotificationsIcon />
      <Badge badgeContent={count} color="error" aria-label={`${count}件の未読通知があります`} />
    </Button>
    ```

*   **フォーム要素のラベル:** 全てのフォーム要素にラベルを関連付けます。
    ```jsx
    <TextField 
      id="email"
      label="メールアドレス"
      required
      inputProps={{ 'aria-required': 'true' }}
      error={!!errors.email}
      helperText={errors.email || ''}
    />
    ```

*   **DataGrid/テーブルのアクセシビリティ:** Material UI DataGridの組み込みアクセシビリティ機能を活用します。
    ```jsx
    <DataGrid
      aria-label="プロジェクト一覧"
      rows={projects}
      columns={columns}
      pagination
      pageSize={pageSize}
      onPageSizeChange={handlePageSizeChange}
      getRowId={(row) => row.id}
    />
    ```

*   **エラー通知:** フォーム送信エラーなどは視覚的だけでなく、スクリーンリーダーにも伝わるようにします。
    ```jsx
    <Alert 
      severity="error"
      aria-live="assertive"
      role="alert"
    >
      {errorMessage}
    </Alert>
    ```

*   **モーダルダイアログのアクセシビリティ:** フォーカス管理やキーボード操作に配慮します。
    ```jsx
    <Dialog
      open={open}
      onClose={handleClose}
      aria-labelledby="dialog-title"
      aria-describedby="dialog-description"
    >
      <DialogTitle id="dialog-title">確認</DialogTitle>
      <DialogContent>
        <DialogContentText id="dialog-description">
          本当に削除しますか？
        </DialogContentText>
      </DialogContent>
      <DialogActions>
        <Button onClick={handleClose}>キャンセル</Button>
        <Button onClick={handleConfirm} autoFocus>削除する</Button>
      </DialogActions>
    </Dialog>
    ```

## 7. 改訂履歴

- 2025/05/06: 初版作成
- 2025/05/07: アクセシビリティ対応方針を更新、多言語・オフライン対応を削除
