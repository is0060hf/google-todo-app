# Google TODO連携アプリケーション 開発タスク一覧

## 1. プロジェクト初期設定
- [x] Next.jsプロジェクトの作成（v14以上）
- [x] 必要なパッケージのインストール（Material UI、Prisma、next-auth、React Query、Zustand）
- [x] プロジェクト構成の整備
- [x] 環境変数の設定（.env.local）
- [x] Google Cloud Platform設定（OAuth同意画面、認証情報）
- [x] Google Tasks APIの有効化と権限設定

## 2. データベース設計・実装
- [x] Neonアカウント作成とデータベース設定
- [x] Prismaスキーマの定義（User、TaskCustomData、Tag、Priority、統計モデル）
- [x] マイグレーション実行と初期データ投入
- [x] Prismaクライアント設定

## 3. 認証機能実装
- [x] next-auth設定（Google Provider）
- [x] サーバーサイドセッション管理
- [x] ログイン/ログアウトフロー
- [x] 権限管理（API認証）
- [x] 利用規約・プライバシーポリシー同意画面

## 4. バックエンドAPI実装
- [x] APIルート構造設計
- [x] Google Tasks API連携エンドポイント
  - [x] タスクリスト管理（取得/作成/更新/削除）
  - [x] タスク管理（取得/作成/更新/削除/移動/完了状態変更）
- [x] 独自データ管理エンドポイント
  - [x] タスク独自データ（優先度、タグ）
  - [x] タグCRUD操作
- [x] ダッシュボード統計データエンドポイント
- [x] ユーザー管理エンドポイント

## 5. フロントエンド基盤実装
- [x] アプリケーションレイアウト設計
- [x] レスポンシブデザイン対応
- [x] 状態管理設定（Zustand）
- [x] APIキャッシュ設定（React Query）
- [x] 共通UIコンポーネント開発

## 6. タスクリスト/タスク管理UI実装
- [x] タスクリストサイドバーコンポーネント
- [x] タスク一覧表示（DataGrid）
  - [x] ソート機能
  - [x] フィルタリング機能
- [x] タスク詳細表示・編集モーダル
- [x] タスク作成・編集フォーム
- [x] タスク削除機能
- [x] タスク完了状態切替機能
- [x] タスク移動機能
- [x] サブタスク管理

## 7. 独自機能（優先度・タグ付け）実装
- [x] 優先度選択コンポーネント
- [x] タグ選択・管理コンポーネント
- [x] 独自データ連携処理（Google Tasks APIデータとの統合）

## 8. ダッシュボード機能実装
- [x] 統計データ収集・計算ロジック
- [x] 各種グラフコンポーネント
  - [x] 完了数推移グラフ
  - [x] 完了率推移グラフ
  - [x] 作成vs完了グラフ
  - [x] アクティビティヒートマップ
  - [x] 分布円グラフ
- [x] 期間切替機能（日次/週次/月次/年次）

## 9. セキュリティ対策
- [x] CSP設定
- [x] CSRF対策
- [x] 認証トークン安全管理
- [x] エラーハンドリング

## 10. パフォーマンス最適化
- [x] キャッシュ戦略実装
- [x] リクエスト最適化（etag活用）
- [x] ローディング表示
- [x] スケルトン表示

## 11. テスト実装
- [ ] 単体テスト（コンポーネント、API）
- [ ] 結合テスト
- [x] E2Eテスト
  - [x] バックエンドE2Eテスト
    - [x] テスト環境構築
      - [x] Jest、SupertestなどのE2Eテストフレームワーク設定
      - [x] テスト用データベース設定
      - [x] Google Tasks APIモックサーバー構築
      - [x] テストユーザー作成とセッション管理
      - [x] Next.js APIルートテスト用環境設定
    - [x] テスト実装の改善
      - [x] APIロジックの分離とテスト容易化
      - [x] ビジネスロジックの分離とモック
      - [x] PrismaのDBクエリのモック実装
      - [x] タグ作成APIのテスト実装改善
      - [x] タスクリスト詳細取得APIのテスト実装改善
      - [x] タスクリスト作成APIのテスト実装改善
      - [x] 全APIエンドポイントのテスト実装（残り）
        - [x] タグ管理テスト（残り）
          - [x] GET /api/tags/[tagId] - タグ詳細取得
          - [x] PATCH /api/tags/[tagId] - タグ更新
          - [x] DELETE /api/tags/[tagId] - タグ削除
        - [x] ユーザー管理テスト（残り）
          - [x] PATCH /api/user - ユーザー情報更新
          - [x] POST /api/user/subscription - サブスクリプションプラン更新
          - [x] DELETE /api/user/delete - アカウント削除
        - [x] タスク独自データテスト
          - [x] GET /api/tasks/custom/[taskId] - タスク独自データ取得
          - [x] PATCH /api/tasks/custom/[taskId] - タスク独自データ更新
          - [x] DELETE /api/tasks/custom/[taskId] - タスク独自データ削除
        - [x] 優先度管理テスト
          - [x] GET /api/priorities - 優先度一覧取得
        - [x] 統計データ管理テスト
          - [x] GET /api/stats/daily - 日次統計データ取得
          - [x] GET /api/stats/weekly - 週次統計データ取得
          - [x] GET /api/stats/monthly - 月次統計データ取得
          - [x] GET /api/stats/yearly - 年次統計データ取得
          - [x] POST /api/stats/update - 統計データ更新
    - [x] 認証関連テスト
      - [x] Googleログインフロー
      - [x] セッション管理
      - [x] 権限チェック
      - [x] 利用規約同意プロセス
    - [x] タスクリスト管理テスト
      - [x] タスクリスト一覧取得テスト（正常系/異常系）
      - [x] タスクリスト作成テスト（正常系/異常系）
      - [x] タスクリスト取得テスト（正常系/異常系）
      - [x] タスクリスト更新テスト（正常系/異常系）
      - [x] タスクリスト削除テスト（正常系/異常系）
    - [x] タスク管理テスト
      - [x] タスク一覧取得テスト（正常系/異常系）
      - [x] タスク作成テスト（正常系/異常系）
      - [x] タスク取得テスト（正常系/異常系）
      - [x] タスク更新テスト（正常系/異常系）
      - [x] タスク削除テスト（正常系/異常系）
      - [x] タスク完了状態切替テスト（正常系/異常系）
      - [x] タスク移動テスト（正常系/異常系）
    - [x] タグ管理テスト
      - [x] タグ一覧取得テスト（正常系/異常系）
      - [x] タグ作成テスト（正常系/異常系）
      - [x] タグ取得テスト（正常系/異常系）
      - [x] タグ更新テスト（正常系/異常系）
      - [x] タグ削除テスト（正常系/異常系）
    - [x] 優先度管理テスト
      - [x] 優先度一覧取得テスト（正常系/異常系）
    - [x] タスク独自データテスト
      - [x] タスク独自データ取得テスト（正常系/異常系）
      - [x] タスク独自データ更新テスト（正常系/異常系）
      - [x] タスク独自データ削除テスト（正常系/異常系）
      - [x] 統計データ管理テスト
        - [x] 日次統計データ取得テスト（正常系/異常系）
        - [x] 週次統計データ取得テスト（正常系/異常系）
        - [x] 月次統計データ取得テスト（正常系/異常系）
        - [x] 年次統計データ取得テスト（正常系/異常系）
        - [x] 統計データ更新テスト（正常系/異常系）
      - [x] ユーザー管理テスト
        - [x] ユーザー情報取得テスト（正常系/異常系）
        - [x] ユーザー情報更新テスト（正常系/異常系）
        - [x] 利用規約同意状態更新テスト（正常系/異常系）
        - [x] サブスクリプションプラン更新テスト（正常系/異常系）
        - [x] アカウント削除テスト（正常系/異常系）
      - [ ] テストカバレッジ測定と改善
        - [x] カバレッジレポート生成
        - [ ] 90%以上のカバレッジ達成のためのテスト追加
          - [ ] auth.tsの認証関連関数のテスト強化
            - [ ] mockAuthenticatedUser関数の分岐カバレッジ向上
            - [ ] mockUnauthenticatedUser関数のテスト拡充
            - [ ] mockMissingAccessToken関数のエッジケーステスト
            - [ ] ユーザーロール別の認証テスト
          - [ ] api-test-utils.tsの未カバー部分のテスト追加
            - [ ] エラーハンドリングパスのテスト強化
            - [ ] トランザクション処理のエッジケーステスト
            - [ ] タスク移動APIのパラメータバリエーションテスト
            - [ ] 統計データAPI内の日付処理エッジケーステスト
          - [ ] 境界値テストの追加
            - [ ] データ入力の最大長テスト
            - [ ] 数値パラメータの上限/下限テスト
            - [ ] 日付範囲の境界値テスト
          - [ ] レアケースのテスト追加
            - [ ] データベース接続エラー時の動作検証
            - [ ] APIレート制限到達時の動作検証
            - [ ] トークン期限切れ時の動作検証
      - [x] エラーケースのテスト
        - [x] ネットワークエラーハンドリングテスト
        - [x] 入力バリデーションテスト
        - [x] 権限エラーテスト
      - [x] 負荷テスト
        - [x] APIエンドポイントの同時多数リクエスト処理テスト
        - [x] データベースの大量データ処理テスト
      - [x] セキュリティテスト
        - [x] 認証バイパステスト
        - [x] APIエンドポイントの不正アクセステスト
        - [x] CSRF保護テスト
  - [x] フロントエンドE2Eテスト
    - [x] テスト環境構築
      - [x] Playwright/Cypressのセットアップ
      - [x] テスト用ユーザーアカウント設定
      - [x] モック認証サービス構築
      - [x] スクリーンショット・動画キャプチャ設定
    - [x] 認証フローテスト
      - [x] ログイン・ログアウトテスト
      - [x] 未認証時のリダイレクトテスト
      - [x] 認証状態の永続化テスト
    - [x] ダッシュボードテスト
      - [x] 統計グラフ表示テスト
      - [x] 期間切替機能テスト
      - [x] データなし状態の表示テスト
      - [x] 優先度・タグ分布表示テスト
    - [x] タスク管理テスト
      - [x] タスクリスト選択テスト
      - [x] タスク一覧表示テスト
      - [x] タスク作成テスト
      - [x] タスク編集テスト
      - [x] タスク削除テスト（確認ダイアログ含む）
      - [x] タスク完了状態切替テスト
      - [x] タスク移動テスト
      - [x] サブタスク管理テスト
    - [x] フィルタリングテスト
      - [x] 優先度フィルターテスト
      - [x] タグフィルターテスト
      - [x] ステータスフィルターテスト
      - [x] 期限フィルターテスト
      - [x] フィルターリセットテスト
      - [x] フィルタリング結果の確認テスト
    - [x] レスポンシブ対応テスト
      - [x] 異なる画面サイズでの表示テスト
      - [x] モバイル表示時のサイドバー切替テスト
      - [x] タッチ操作テスト
    - [x] 多言語対応テスト
      - [x] 言語切替テスト
      - [x] UI要素の翻訳確認テスト
    - [x] エラー処理テスト
      - [x] ネットワークエラー表示テスト
      - [x] ロード状態表示テスト
      - [x] 入力バリデーションテスト
    - [x] パフォーマンステスト
      - [x] ページロード時間測定
      - [x] データグリッド表示パフォーマンス

## 12. デプロイ・CI/CD
- [ ] Vercelデプロイ設定
- [ ] 環境変数設定
- [ ] CI/CD構築（GitHub Actions）
- [ ] エラー監視設定

## 13. 運用準備
- [ ] ドキュメント作成
- [ ] プライバシーポリシー・利用規約作成
- [ ] サポート体制構築 

## 14. タスクリスト/タスク管理UI実装の修正
- [x] タスク削除機能の完全実装
  - [x] TaskDataGrid.tsxのhandleDeleteTask関数にAPIの呼び出しを実装
  - [x] 削除前の確認ダイアログの追加
  - [x] 削除後のUI更新処理の実装
- [x] タスク移動機能の実装
  - [x] タスクの表示順序変更機能（ドラッグ&ドロップまたはボタン）
  - [x] タスク移動APIとの連携実装
  - [x] API呼び出しにエラーハンドリングの追加
- [x] 優先度とタグ表示の実装
  - [x] TaskDataGrid.tsxでの優先度とタグのデータ取得
  - [x] カスタムデータと連携したレンダリング処理
  - [x] フィルタリング機能との連携
- [x] サブタスク管理機能の実装
  - [x] サブタスクのUI表示（階層構造）
  - [x] サブタスク作成・編集・削除機能
  - [x] 親子関係の管理
  - [x] 5階層までのネスト制限の実装 

## 15. 要修正・未実装タスク
- [x] CSP設定の実装
  - [x] next.config.jsでのContent-Security-Policy設定（仕様書4.8.1参照）
  - [x] その他のセキュリティヘッダー設定（X-Content-Type-Options, X-Frame-Options など）
- [x] 統計データの実際のデータ使用
  - [x] DistributionPieChartでのモックデータをAPIデータに置き換え（優先度・タグ分布）
- [x] タグと優先度のフィルタリング実装強化
  - [x] DataGridでのタグでのフィルタリング機能の完全実装
  - [x] 優先度フィルターの完全実装
- [x] レスポンシブデザイン改善
  - [x] モバイル画面でのダッシュボードレイアウト調整
  - [x] タスク一覧画面のモバイル対応強化
- [ ] エラー監視設定
  - [ ] Sentryなどの外部エラー監視サービスの導入検討
- [x] 国際化対応
  - [x] プレースホルダだけでなくi18nライブラリを使用した国際化対応

## 16. フロントエンドE2Eテスト環境整備と実行
- [x] 依存関係の修正
  - [x] package.jsonへのNext.js関連パッケージ追加（next, react, react-dom）
  - [x] Material UI関連パッケージ追加（@mui/material, @mui/icons-material, @mui/x-data-grid）
  - [x] Babelプリセット追加（@babel/core, @babel/preset-env, @babel/preset-react, @babel/preset-typescript）
  - [x] 開発・ビルドスクリプト追加（build, start, lint, test:e2e）
- [x] playwright.config.ts設定修正
  - [x] webServer設定の有効化とタイムアウト設定
  - [x] ブラウザプロジェクト設定の最適化
  - [x] スクリーンショット・ビデオキャプチャ設定
- [x] 認証テスト強化
  - [x] モック認証機能（auth-utils.ts）とNext Auth連携の整合性確認
  - [x] API認証のモック方法の改善
  - [x] CSRF保護機能のテスト強化
- [x] APIモック強化
  - [x] Google Tasks API応答とアプリケーションモデルの整合性確保
  - [x] etag対応とキャッシュ検証テスト
  - [x] エラーハンドリングと再試行機能のテスト拡充
- [x] 非機能要件テスト強化
  - [x] パフォーマンステスト基準の明確化（NFR-PERF-001: 3秒以内のロード）
  - [x] CSP設定検証テスト
  - [x] アクセシビリティテスト（WCAG レベルAA準拠）
- [ ] テストデータとテストケースの拡充
  - [x] エッジケース（大量データ、極端な入力値）のテスト
  - [ ] 複数ユーザーのマルチセッションテスト
  - [ ] オフライン・低帯域幅環境のテスト
- [ ] CI/CD統合
  - [ ] GitHub Actionsでのフロントエンドテスト自動化
  - [ ] テスト結果レポートとアラート設定
  - [ ] モバイルデバイスエミュレーションテスト強化

## 17. テスト品質向上と保守性改善
- [ ] テストコード保守性向上
  - [ ] Page Objectパターンによるテストコードのリファクタリング
  - [ ] テストユーティリティ関数の共通化と統合
  - [ ] テストシナリオのドキュメント化とトレーサビリティ向上
- [ ] カバレッジ測定と改善
  - [ ] フロントエンドE2Eテストのカバレッジ目標設定
  - [ ] ユーザーフロー網羅率の測定と改善
  - [ ] 仕様書要件とテスト項目のトレーサビリティマトリクス作成
- [ ] テスト安定性向上
  - [ ] フレーキーテスト（不安定なテスト）の特定と安定化
  - [ ] タイミング依存テストの堅牢性向上
  - [ ] 環境依存性の最小化 

## 18. 'use client'ディレクティブの追加
- [x] app/layout.tsxに'use client'ディレクティブを追加する
  - 理由: ThemeProviderとcreateThemeをインポートしており、クライアントコンポーネントとして指定する必要がある
- [x] app/src/app/layout.tsxに'use client'ディレクティブを追加する（存在する場合）
  - 理由: レイアウトコンポーネントでクライアントサイド機能を使用する可能性がある
- [x] app/src/app/page.tsxに'use client'ディレクティブを追加する
  - 理由: useQueryなどのクライアントサイドのフックを使用している可能性がある

### 既に'use client'ディレクティブが設定されているコンポーネント（参考）
1. UIコンポーネント:
- app/components/ui/SkeletonList.tsx
- app/components/ui/ConfirmDialog.tsx
- app/components/ui/LoadingContainer.tsx
- app/components/ui/Alert.tsx
- app/components/ui/TextField.tsx
- app/components/ui/Loading.tsx
- app/components/ui/Button.tsx
- app/components/ui/Modal.tsx
- app/components/ui/Select.tsx
- app/components/ui/LanguageSwitcher.tsx

2. タスク関連コンポーネント:
- app/components/tasks/TaskListSidebar.tsx
- app/components/tasks/TaskModal.tsx
- app/components/tasks/TaskDataGrid.tsx
- app/components/tasks/TaskFilterBar.tsx
- app/tasks/page.tsx

3. ダッシュボード関連コンポーネント:
- app/components/dashboard/CompletedTasksChart.tsx
- app/components/dashboard/PeriodSelector.tsx
- app/components/dashboard/CreatedVsCompletedChart.tsx
- app/components/dashboard/CompletionRateChart.tsx
- app/components/dashboard/ActivityHeatmapChart.tsx
- app/components/dashboard/DistributionPieChart.tsx
- app/dashboard/page.tsx

4. カスタムコンポーネント:
- app/components/custom/PrioritySelector.tsx
- app/components/custom/TagSelector.tsx
- app/components/custom/CustomDataManager.tsx

5. その他:
- app/components/layout/Header.tsx
- app/components/error/ErrorBoundary.tsx
- app/auth/mock-signin/page.tsx
- app/auth/signin/page.tsx
- app/auth/error/page.tsx
- app/terms-agreement/page.tsx
- app/providers.tsx

### E2Eテスト修正に関するタスク
- [ ] 'use client'ディレクティブを追加した後にE2Eテストを実行して検証
  - [x] 'metadata'のエクスポートとの競合を解決するために、ThemeProviderWrapperを別コンポーネントとして実装
  - [x] auth-utils.tsのlocalStorage操作部分をエラー耐性のあるように修正
  - [x] Playwrightの設定でstorage-accessパーミッションを追加
- [ ] 必要に応じて追加のコンポーネントにも'use client'ディレクティブを追加
- [ ] 追加したディレクティブによる影響がないか確認（サーバーサイドレンダリングの最適化など） 

## 19. 仕様書との差分修正タスク

### アクセシビリティ対応強化
- [ ] WCAG 2.1 AAレベル準拠の完全確認
  - [ ] コントラスト比の確認（テキストと背景の比率が4.5:1以上）
  - [ ] キーボード操作の完全対応確認（全機能がキーボードのみで操作可能か）
  - [x] スクリーンリーダー対応の確認（ARIA属性の適切な使用）
    - [x] DataGridコンポーネントのaria-label属性追加
    - [x] モーダルダイアログのaria-labelledby、aria-describedby属性追加
    - [x] ステータス変更時のaria-live領域の追加
  - [ ] フォーカス順序の論理的設定
  - [ ] エラー状態の明確な通知
  - [ ] 拡大表示（200%まで）での表示確認
- [x] コンポーネント別アクセシビリティ対応
  - [x] Modal.tsx
    - [x] ダイアログにaria-labelledby、aria-describedby属性追加
    - [x] タイトルと説明部分にID属性追加
    - [x] 閉じるボタンにaria-label属性追加
  - [x] TagSelector.tsx
    - [x] Autocompleteにaria-required属性追加
    - [x] アイコンボタンにaria-label属性追加
    - [x] リスト表示形式の改善（ListItem使用）
    - [x] ダイアログにアクセシビリティ属性追加
  - [x] TaskDataGrid.tsx
    - [x] DataGridコンポーネントにaria-label属性追加
    - [x] 状態変更チェックボックスにaria-label属性追加
    - [x] アクション用アイコンボタンにaria-label属性追加
    - [x] 日本語localeTextの設定追加
  - [x] PrioritySelector.tsx
    - [x] Selectコンポーネントにaria属性追加
    - [x] 装飾アイコンにaria-hidden="true"設定
    - [x] ヘルパーテキスト参照用ID追加
  - [x] TaskModal.tsx
    - [x] フォーム要素にaria-required、aria-label属性追加
    - [x] 日付選択コンポーネントのアクセシビリティ対応
    - [x] サブタスク一覧にaria-label属性追加
    - [x] モーダル説明テキスト追加
- [ ] 今後の対応課題
  - [ ] Alert/Snackbarコンポーネントにaria-live属性追加
  - [ ] キーボードナビゲーションの最適化
  - [ ] カラーコントラスト解析ツールによる検証
  - [ ] スクリーンリーダーによる動作確認テスト
  - [ ] アクセシビリティテストのCI/CD組み込み

### データグリッド機能強化
- [ ] タスク一覧画面のフィルタリング機能完全実装
  - [ ] 優先度フィルター（高/中/低）の実装確認
    - [ ] TaskFilterBar.tsxに優先度フィルターコンポーネント追加
    - [ ] フィルター条件をTaskDataGrid.tsxに適用
  - [ ] タグフィルター（複数選択）の実装確認
    - [ ] マルチセレクト型のタグフィルター実装
    - [ ] 選択したタグを持つタスクのみ表示
  - [ ] 期日フィルター（今日/明日/今週/期限切れ/範囲指定）の実装確認
    - [ ] 期日範囲選択UIの追加
    - [ ] 日付計算ロジックの実装
  - [ ] ステータスフィルター（未完了/完了/全て）の実装確認
  - [ ] フリーテキスト検索の実装確認
    - [ ] タイトルと説明文に対する全文検索の実装

### API呼び出し最適化
- [ ] Google Tasks APIのQuota対策実装確認
  - [ ] APIレスポンスのキャッシュ戦略実装
    - [ ] React QueryのstaleTime、cacheTimeの最適化
    - [ ] ローカルストレージによるデータ永続化の検討
  - [ ] 指数バックオフを用いたリトライ実装
    - [ ] APIクライアントにリトライロジック実装
    - [ ] 最大リトライ回数とタイムアウト設定
  - [ ] etagを利用した不要なデータ取得回避
    - [ ] タスクリスト取得時のetagチェック実装
    - [ ] 変更がない場合のキャッシュ利用
  - [ ] API呼び出し回数の最適化（バッチ処理やポーリング間隔調整）
    - [ ] ポーリング間隔の調整（最小5分）
    - [ ] バックグラウンド同期の実装検討

### エラーハンドリング・監視強化
- [ ] エラー監視サービスの導入
  - [ ] Sentryなどのエラー監視サービスの統合
    - [ ] Sentryクライアントのセットアップ
    - [ ] エラーバウンダリの実装
  - [ ] カスタムエラーページの実装
    - [ ] 404、500エラーページのデザイン
    - [ ] 回復アクションの提案
  - [ ] ユーザーへのわかりやすいエラーメッセージ表示
    - [ ] アラートコンポーネントの改善
    - [ ] エラー種別ごとのわかりやすいメッセージ定義
  - [ ] ログ記録の拡充
    - [ ] 重要操作のログ記録
    - [ ] デバッグ情報の記録レベル設定

### レスポンシブデザイン改善
- [ ] モバイル表示の検証と改善
  - [ ] タスク一覧のカード形式表示（モバイル時）
    - [ ] DataGridからカードリスト表示への切り替え実装
    - [ ] TaskCard.tsxコンポーネントの実装
  - [ ] フィルターをドロワー内に配置（モバイル時）
    - [ ] フィルタードロワーコンポーネントの実装
    - [ ] 画面サイズによる表示切替ロジック
  - [ ] ダッシュボードグラフのモバイル表示最適化
    - [ ] モバイル向けグラフサイズとレイアウト調整
    - [ ] グラフコンポーネントの縦長表示対応
  - [ ] タッチ操作の最適化（ボタンサイズ、操作領域）
    - [ ] タッチターゲットサイズの最小44px確保
    - [ ] スワイプジェスチャー対応の検討

### パフォーマンス最適化
- [ ] 初回表示時間の最適化（3秒以内目標）
  - [ ] 画像・アセットの最適化
    - [ ] アバター画像のサイズ最適化
    - [ ] アイコンのSVG使用とバンドル最適化
  - [ ] コード分割の最適化
    - [ ] 各ページごとのダイナミックインポート
    - [ ] 大きなライブラリの遅延ロード
  - [ ] サーバーサイドレンダリングの活用
    - [ ] 静的ページのISR/SSG活用
    - [ ] データフェッチ戦略の最適化
  - [ ] パフォーマンス計測と改善
    - [ ] Lighthouseによるパフォーマンス計測
    - [ ] First Contentful Paint最適化

### ダッシュボード機能強化
- [ ] 統計データ生成・集計ロジックの確認
  - [ ] バッチ処理による定期集計の実装確認
    - [ ] Vercel Cron Jobの設定
    - [ ] 日次/週次/月次/年次の集計ロジック
  - [ ] 大量データ処理時のパフォーマンス対策確認
    - [ ] クエリの最適化（インデックス活用）
    - [ ] データ量に応じた表示制限と集約
  - [ ] リアルタイム更新とキャッシュのバランス確認
    - [ ] 統計データの更新トリガー設定
    - [ ] キャッシュ無効化条件の最適化
  - [ ] 固定グラフコンポーネントの機能強化
    - [ ] 画面仕様書に記載された全グラフの実装確認
    - [ ] 期間選択による表示データ変更機能
    - [ ] グラフデータの空データ処理

### その他機能確認
- [ ] サブタスク管理の階層制限（5階層）実装確認
  - [ ] MAX_TASK_DEPTHの値と制限ロジックのテスト
  - [ ] 階層レベルの視覚的表示の改善
- [ ] タスク移動機能（ドラッグ&ドロップまたはボタン）の実装確認
  - [ ] ドラッグ&ドロップによる順序変更の実装検討
  - [ ] 現状の上下移動ボタンの動作検証
- [ ] 利用規約・プライバシーポリシー同意画面の実装確認
  - [ ] 初回ログイン時の同意フロー確認
  - [ ] 同意テキストの内容充実
- [ ] 課金プラン管理基盤の実装確認
  - [ ] User.subscriptionPlanの活用状況確認
  - [ ] プラン別機能制御の将来拡張性確認

### 不足UI/UX要素の追加
- [ ] ローディングインジケーターの改善
  - [ ] CircularProgress/LinearProgressの適切な使用
  - [ ] デザイン一貫性のあるローディング表示
- [ ] スケルトン表示の拡充
  - [ ] タスク一覧画面用のスケルトン表示
  - [ ] ダッシュボード用のスケルトン表示
- [ ] フィードバック機構の強化
  - [ ] 操作成功時のスナックバー表示
  - [ ] アニメーションによる視覚的フィードバック
- [ ] 国際化対応の完成
  - [ ] 全テキストのi18n対応確認
  - [ ] 日付フォーマットのローカライズ強化 

### セキュリティ対応の強化
- [ ] CSP設定の再確認
  - [ ] 現在のCSP設定が最適か検証
  - [ ] 'unsafe-inline'と'unsafe-eval'の必要性検討と代替策検討
  - [ ] CSP違反レポートの収集と分析
- [ ] CSRF対策の完全確認
  - [ ] 全状態変更リクエストでCSRFトークン検証を実施
  - [ ] Double Submit Cookie Patternの実装状況確認
- [ ] OAuthトークン管理の強化
  - [ ] リフレッシュトークンのセキュアな保管方法の確認
  - [ ] アクセストークンの有効期限管理と自動更新
- [ ] データベースセキュリティ
  - [ ] Prismaを通じたSQLインジェクション対策の確認
  - [ ] 機密データの暗号化対応検討
- [ ] 認証フロー
  - [ ] PKCE (Proof Key for Code Exchange)の実装状況確認
  - [ ] セッションCookieのセキュリティ属性確認（HttpOnly, Secure, SameSite）

### データベース設計・実装の改善
- [ ] Prismaスキーマと仕様書の整合性確認
  - [ ] User モデルのフィールド完全性確認
  - [ ] TaskCustomData モデルのタグ関連リレーション確認
  - [ ] 統計データモデルの完全性確認
- [ ] インデックス最適化
  - [ ] 頻繁にアクセスされるフィールドのインデックス確認
  - [ ] クエリパフォーマンスの検証
- [ ] データ整合性の確保
  - [ ] 外部キー制約とカスケード削除の設定確認
  - [ ] ユニーク制約の設定確認

### 認証・認可の強化
- [ ] next-auth設定の確認
  - [ ] Google Providerの完全設定確認（scope含む）
  - [ ] セッション設定の最適化確認
  - [ ] コールバックURLの安全性確認
- [ ] 権限管理の実装
  - [ ] APIエンドポイントの認証ミドルウェア確認
  - [ ] ユーザーごとのデータアクセス制限確認
- [ ] 利用規約同意プロセス
  - [ ] 同意フローの完全実装確認
  - [ ] 同意記録の保存と検証機能

### 機能網羅性の検証
- [ ] 画面仕様書の要素実装確認
  - [ ] ヘッダー要素の完全実装確認
    - [ ] アプリケーションロゴ/名称
    - [ ] 現在の画面タイトル
    - [ ] ユーザーアイコンとプロフィールメニュー
    - [ ] 設定アイコン
  - [ ] サイドナビゲーション要素の完全実装確認
    - [ ] ユーザー情報（簡易表示）
    - [ ] メインナビゲーションリンク一式
    - [ ] モバイル時のハンバーガーメニュー
  - [ ] フッター要素の完全実装確認
    - [ ] 著作権表示
    - [ ] プライバシーポリシーへのリンク
    - [ ] 利用規約へのリンク
- [ ] 各画面の機能完全性確認
  - [ ] ログイン画面
    - [ ] アプリケーションロゴ、名称、説明文
    - [ ] Googleログインボタン
  - [ ] ダッシュボード画面
    - [ ] 期間選択タブ
    - [ ] 主要統計値カード
    - [ ] 全グラフコンテナ実装確認
      - [ ] 完了数推移グラフ
      - [ ] 完了率推移グラフ
      - [ ] 作成vs完了比較グラフ
      - [ ] アクティビティヒートマップ
      - [ ] 優先度別/タグ別タスク分布円グラフ
  - [ ] タスクリスト一覧画面
    - [ ] リスト表示（名前、最終更新日、タスク数）
    - [ ] 新規作成/編集/削除機能
  - [ ] タスク一覧画面
    - [ ] フィルター/ソートツールバー
    - [ ] DataGridによるタスク一覧表示
    - [ ] 新規タスク作成FABボタン
  - [ ] タスク詳細画面
    - [ ] 基本情報表示（タイトル、説明、期日、優先度、タグ）
    - [ ] 完了状態チェックボックス
    - [ ] サブタスクリスト
    - [ ] 編集/削除/閉じるボタン
  - [ ] タグ管理画面
    - [ ] タグ一覧表示
    - [ ] 新規作成/編集/削除機能
  - [ ] 設定画面
    - [ ] テーマ切替
    - [ ] 表示密度設定
    - [ ] デフォルトビュー設定

### テーマとスタイリングの改善
- [ ] カラーパレットの適用確認
  - [ ] プライマリーカラー（Google Blueベース）
  - [ ] セカンダリーカラーと補完色
  - [ ] 優先度表示色の正しい実装
- [ ] タイポグラフィの確認
  - [ ] 基本フォントの適用状況
  - [ ] 見出し・本文など用途別サイズ設定
- [ ] ダークモード対応の完全性
  - [ ] すべてのコンポーネントでのダークモード動作確認
  - [ ] システム設定連動機能の確認

### API設計とエンドポイント実装の確認
- [ ] 仕様書に定義されたAPI設計との整合性確認
  - [ ] Google Tasks API連携エンドポイント
    - [ ] タスクリスト関連エンドポイント完全実装確認
    - [ ] タスク関連エンドポイント完全実装確認
    - [ ] タスク移動/完了状態変更エンドポイント確認
  - [ ] 独自データ管理エンドポイント
    - [ ] タスク独自データエンドポイント実装確認 
    - [ ] タグCRUD操作エンドポイント実装確認
  - [ ] ダッシュボード統計データエンドポイント
    - [ ] 期間パラメータ対応確認
    - [ ] データフォーマット整合性確認
  - [ ] ユーザー管理エンドポイント
    - [ ] プロファイル取得/更新エンドポイント確認
    - [ ] サブスクリプション情報エンドポイント確認

### E2Eテスト計画の見直し
- [ ] 仕様書に対応するE2Eテストケースの追加
  - [ ] ユーザーストーリーごとのテストシナリオ作成
  - [ ] 各画面の主要機能テスト
  - [ ] エラーケースとエッジケースのテスト
- [ ] アクセシビリティテストの追加
  - [ ] スクリーンリーダー対応テスト
  - [ ] キーボードナビゲーションテスト
- [ ] パフォーマンステストの拡充
  - [ ] ページロード時間測定の自動化
  - [ ] 大量データ処理時の動作確認テスト

### デプロイ・運用準備の確認
- [ ] CI/CD設定の完全性確認
  - [ ] GitHub Actionsワークフロー設定
  - [ ] テスト自動化の設定
  - [ ] デプロイプロセスの最適化
- [ ] Vercel設定の最適化
  - [ ] 環境変数の完全設定確認
  - [ ] デプロイターゲットとビルド設定確認
  - [ ] アナリティクスの活用設定
- [ ] 運用ドキュメントの準備
  - [ ] システム概要と構成図
  - [ ] トラブルシューティングガイド
  - [ ] 運用手順とチェックリスト 